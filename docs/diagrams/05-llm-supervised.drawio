<mxfile host="app.diagrams.net" agent="Claude" version="24.0.0" type="device">
  <diagram id="llm-supervised" name="LLM-Supervised Architecture">
    <mxGraphModel dx="1422" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="cl_title" value="&lt;b&gt;LLM-Supervised Architecture&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:11px&quot;&gt;Binary handles deterministic computation; Host LLM supervises high-value judgment&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;fontSize=16;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="250" y="10" width="600" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_bin_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="450" height="580" as="geometry" />
        </mxCell>
        <mxCell id="cl_bin_title" value="&lt;b&gt;Binary (Organ)&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px&quot;&gt;Deterministic, high-frequency, zero cost&lt;/font&gt;" style="text;html=1;align=center;fontSize=14;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="100" y="90" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b1" value="&lt;b&gt;Storage&lt;/b&gt;&lt;br&gt;SQLite WAL, ACID, single file" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="145" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b2" value="&lt;b&gt;Graph Indexing&lt;/b&gt;&lt;br&gt;temporal backbone, entity co-occurrence, auto-edges" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="200" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b3" value="&lt;b&gt;Keyword Search&lt;/b&gt;&lt;br&gt;tokenization, stopwords, CJK bigrams, scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="255" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b4" value="&lt;b&gt;Intent Detection&lt;/b&gt;&lt;br&gt;regex pattern matching → WHY/WHEN/ENTITY/GENERAL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="310" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b5" value="&lt;b&gt;Beam Search &amp; RRF Fusion&lt;/b&gt;&lt;br&gt;multi-signal anchoring, graph traversal, reranking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="365" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b6" value="&lt;b&gt;Vector Computation&lt;/b&gt;&lt;br&gt;cosine similarity, embedding serialization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="420" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b7" value="&lt;b&gt;Entity Extraction&lt;/b&gt;&lt;br&gt;regex + 200-word tech dictionary + CamelCase/ALLCAPS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="475" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b8" value="&lt;b&gt;Lifecycle Decay&lt;/b&gt;&lt;br&gt;EI formula, auto-prune, immunity rules, GC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="530" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_b9" value="&lt;b&gt;Duplicate Detection&lt;/b&gt;&lt;br&gt;content similarity, negation patterns → ADD/UPDATE/CONFLICT/DUPLICATE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F3FF;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="70" y="585" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_llm_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="610" y="80" width="450" height="580" as="geometry" />
        </mxCell>
        <mxCell id="cl_llm_title" value="&lt;b&gt;Host LLM (Supervisor)&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px&quot;&gt;High-value judgment, full context, Opus-level&lt;/font&gt;" style="text;html=1;align=center;fontSize=14;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="670" y="90" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cl_l1" value="&lt;b&gt;Causal Chain Evaluation&lt;/b&gt;&lt;br&gt;Review causal candidates: did A really cause B?" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="145" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l2" value="&lt;b&gt;Semantic Relevance Judgment&lt;/b&gt;&lt;br&gt;Review grey-zone candidates (cos 0.40-0.80), decide whether to link" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="210" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l3" value="&lt;b&gt;Entity Enrichment&lt;/b&gt;&lt;br&gt;Add entities that regex missed (via --entities flag)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="275" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l4" value="&lt;b&gt;Memory Triage&lt;/b&gt;&lt;br&gt;Decide what to remember: directives, conclusions, observations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="340" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l5" value="&lt;b&gt;Conflict Resolution&lt;/b&gt;&lt;br&gt;When diff returns CONFLICT, decide keep old or new" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="405" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l6" value="&lt;b&gt;Result Re-ranking&lt;/b&gt;&lt;br&gt;Use signals transparency + conversation context for final ranking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="470" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_l7" value="&lt;b&gt;Category &amp; Importance Assignment&lt;/b&gt;&lt;br&gt;Classify memory as decision/preference/fact, assign importance 1-5" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6FFE6;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="640" y="535" width="390" height="45" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow1_label" value="&lt;b&gt;JSON Candidate Output&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;semantic_candidates&lt;br&gt;causal_candidates&lt;br&gt;signals breakdown&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="493" y="240" width="114" height="70" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;strokeWidth=2;" edge="1" parent="1" source="cl_arrow1_label" target="cl_l1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow1b" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;strokeWidth=2;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cl_b3" target="cl_arrow1_label">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow2_label" value="&lt;b&gt;CLI Commands&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;remember, link,&lt;br&gt;forget, gc --keep&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="493" y="440" width="114" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;strokeWidth=2;" edge="1" parent="1" source="cl_l5" target="cl_arrow2_label">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cl_arrow2b" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;strokeWidth=2;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cl_arrow2_label" target="cl_b8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cl_cmp_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="690" width="1020" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cl_cmp" value="&lt;b&gt;vs Embedded LLM (Mem0/MemCP)&lt;/b&gt;: gpt-4o-mini inside → API cost per operation, weaker reasoning, network dependency&lt;br&gt;&lt;b&gt;LLM-Supervised (Mnemon)&lt;/b&gt;: Host LLM (Opus/Sonnet) supervises → zero extra cost, stronger judgment, works offline" style="text;html=1;align=center;fontSize=10;fillColor=none;strokeColor=none;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="60" y="700" width="980" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
